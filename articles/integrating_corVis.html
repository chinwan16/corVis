<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Integrating corVis with other packages • corVis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Integrating corVis with other packages">
<meta property="og:description" content="corVis">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">corVis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/calc_association.html">Calculating associations using corVis</a>
    </li>
    <li>
      <a href="../articles/integrating_corVis.html">Integrating corVis with other packages</a>
    </li>
    <li>
      <a href="../articles/scagnostic_corVis.html">Exploring pairwise associations with scagnostics and corVis</a>
    </li>
    <li>
      <a href="../articles/seriation.html">Seriation in corVis</a>
    </li>
    <li>
      <a href="../articles/vis_association.html">Visualising associations using corVis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="integrating_corVis_files/kePrint-0.0.1/kePrint.js"></script><link href="integrating_corVis_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="integrating_corVis_files/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="integrating_corVis_files/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="integrating_corVis_files/vis-9.1.0/vis-network.min.js"></script><script src="integrating_corVis_files/visNetwork-binding-2.1.2/visNetwork.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Integrating corVis with other packages</h1>
                        <h4 data-toc-skip class="author">Amit Chinwan
and Catherine Hurley</h4>
            
            <h4 data-toc-skip class="date">2023-04-05</h4>
      
      
      <div class="hidden name"><code>integrating_corVis.Rmd</code></div>

    </div>

    
    
<p>This vignette provides information on how data structures or display
methods in <em>corVis</em> can be used with other R packages. We
separate out the calculation and visualisation steps in <em>corVis</em>,
which makes it an open ended package for both data structures and
displays.</p>
<div class="section level2">
<h2 id="using-data-structures-from-corvis-with-other-packages">Using data structures from <code>corVis</code> with other
packages<a class="anchor" aria-label="anchor" href="#using-data-structures-from-corvis-with-other-packages"></a>
</h2>
<p>The package provides a collection of various measures of association
which can be used to quantify the relationship between two variables and
could be used to explore patterns prior to modeling. The measures
available in the package are not limited to <em>numeric</em> variables
only and can be used with <em>categorical</em> and <em>ordinal</em>
variables as well. Table 1 lists the different measures of association
provided in the package with the variable types they can be used with,
the package used for calculation, the information on whether the measure
is symmetric, and the minimum and maximum value of the measure.</p>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
nn
</th>
<th style="text-align:left;">
ff
</th>
<th style="text-align:left;">
oo
</th>
<th style="text-align:left;">
nf
</th>
<th style="text-align:left;">
from
</th>
<th style="text-align:left;">
range
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
tbl_cor
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
stats::cor
</td>
<td style="text-align:left;">
[-1,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_dcor
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
energy::dcor2d
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_mine
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
minerva::mine
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_ace
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
corVis
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_cancor
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
corVis
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_nmi
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
linkspotter::maxNMI
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_polycor
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
polycor::polychor
</td>
<td style="text-align:left;">
[-1,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_tau
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
DescTools::KendalTauA,B,C,W
</td>
<td style="text-align:left;">
[-1,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_gkGamma
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
DescTools::GoodmanKruskalGamma
</td>
<td style="text-align:left;">
[-1,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_gkTau
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
DescTools::GoodmanKruskalTau
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_uncertainty
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
DescTools::UncertCoef
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
<tr>
<td style="text-align:left;">
tbl_chi
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
y
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
DescTools::ContCoef
</td>
<td style="text-align:left;">
[0,1]
</td>
</tr>
</tbody>
</table>
<p>Table 1: Table of association measures available in the package
corVis</p>
<p>An analyst can follow <em>Calculating associations using corVis</em>
vignette for calculating association measures. These data structures are
then used with other packages to display association measures.</p>
<div class="section level3">
<h3 id="visualising-association-measures-using-corrplot">Visualising association measures using <code>corrplot</code><a class="anchor" aria-label="anchor" href="#visualising-association-measures-using-corrplot"></a>
</h3>
<p>The package <em>corrplot</em> provides an implementation of the
methods in Friendly (2002) and produces correlation display in matrix
layout. The correlation displays in the package are only applicable to
numeric variables in a dataset. In <em>corVis</em>, we calculate
association measures for all variables irrespective of their type and
then display these measures with different layouts. After calculating
measures we can use other packages which provide correlation displays
and support tidy structure of association measures to visualize
association in a dataset. Figure 1 shows the correlation plot of the
numeric variables in penguins data on the left and association measure
display on the right. The plot on the right show strong association for
species and other numeric variables which is not present in the
left-hand plot.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/taiyun/corrplot" class="external-link">corrplot</a></span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">penguins</span></span>
<span><span class="va">df_num</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/pkg/corrplot/man/corrplot.html" class="external-link">corrplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">df_num</span>,use <span class="op">=</span> <span class="st">"pairwise.complete.obs"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguins_assoc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_assoc.html">calc_assoc</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguins_assoc_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matrix_assoc.html">matrix_assoc</a></span><span class="op">(</span><span class="va">penguins_assoc</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/corrplot/man/corrplot.html" class="external-link">corrplot</a></span><span class="op">(</span><span class="va">penguins_assoc_mat</span>, diag <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p><img src="integrating_corVis_files/figure-html/corrplot_assoc-1.png" width="40%"><img src="integrating_corVis_files/figure-html/corrplot_assoc-2.png" width="40%"></p>
<p>Figure 1: Left: Correlation plot for penguins data using
<code>corrplot</code>. Right: Association plot for penguins data using
association measures calculated by <code>corVis</code> and visulaized
with <code>corrplot</code>.</p>
</div>
<div class="section level3">
<h3 id="visualising-association-measures-using-linkspotter">Visualising association measures using <code>linkspotter</code><a class="anchor" aria-label="anchor" href="#visualising-association-measures-using-linkspotter"></a>
</h3>
<p>The <code>linkspotter</code> package calculates and visualizes
association for numeric and factor variables using a network layout
plot. The nodes show the variables and the edges represent the measure
of association between pair of variables. The width of edge maps to
absolute correlation among the nodes. Two nodes are connected if the
<code>corMethod</code> is defined for the variable pairs.</p>
<p>It is not possible to use association measures calculated using
<code>corVis</code> to display with <code>linkspotter</code> package as
they have hard-coded the displays with measures available only in their
package. We create a custom function to display association measures in
a network display as shown in Figure 2.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sambaala/linkspotter" class="external-link">linkspotter</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://igraph.org" class="external-link">igraph</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">corCouples</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/linkspotter/man/multiBivariateCorrelation.html" class="external-link">multiBivariateCorrelation</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Number of variables: 8 </span></span>
<span><span class="co">## Number of couples: 28 </span></span>
<span><span class="co">## Number of observations: 344 </span></span>
<span><span class="co">## Coef.: pearson, spearman, kendall, mic, MaxNMI</span></span>
<span><span class="co">## Start time: 2023-04-05 10:34:10 </span></span>
<span><span class="co">## Correlation coef. computation finished: 2023-04-05 10:34:13</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/linkspotter/man/linkspotterGraph.html" class="external-link">linkspotterGraph</a></span><span class="op">(</span>corDF <span class="op">=</span> <span class="va">corCouples</span>, corMethod <span class="op">=</span> <span class="st">"pearson"</span>, smoothEdges <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  dynamicNodes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-5519e78e2a6939d89484" style="width:100%;height:100%;" class="visNetwork html-widget "></div>
<script type="application/json" data-for="htmlwidget-5519e78e2a6939d89484">{"x":{"nodes":{"id":["species","island","bill_length_mm","bill_depth_mm","flipper_length_mm","body_mass_g","sex","year"],"label":["species","island","bill_length_mm","bill_depth_mm","flipper_length_mm","body_mass_g","sex","year"],"title":["species","island","bill_length_mm","bill_depth_mm","flipper_length_mm","body_mass_g","sex","year"]},"edges":{"id":["15","16","19","20","23"],"from":["bill_length_mm","bill_length_mm","bill_depth_mm","bill_depth_mm","flipper_length_mm"],"to":["flipper_length_mm","body_mass_g","flipper_length_mm","body_mass_g","body_mass_g"],"typeOfCouple":["num.num","num.num","num.num","num.num","num.num"],"pearson":[0.656181340746428,0.59510982443763,-0.583851216465413,-0.471915621186067,0.871201767306011],"spearman":[0.672771941625554,0.583800319445548,-0.523267471161074,-0.432372221413044,0.8399741230313],"kendall":[0.483345441762745,0.433359178368938,-0.281894499346629,-0.195069846128774,0.660467495345973],"mic":[0.483850848406702,0.392274673666884,0.659988830906406,0.518085006394912,0.694241372377172],"MaxNMI":[0.277196195251305,0.242222561231358,0.363633947863205,0.352718792752059,0.416165430100181],"correlationType":["positive","positive","negative","negative","positive"],"value":[0.656181340746428,0.59510982443763,0.583851216465413,0.471915621186067,0.871201767306011],"title":["pearson: 0.66","pearson: 0.60","pearson: -0.58","pearson: -0.47","pearson: 0.87"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"edges":{"smooth":false}},"groups":null,"width":"100%","height":"100%","idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","events":{"stabilizationIterationsDone":"function () {this.setOptions( { physics: false } );}"}},"evals":["events.stabilizationIterationsDone"],"jsHooks":[]}</script><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw_corVis</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">assoc</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">assoc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sym_assoc.html">sym_assoc</a></span><span class="op">(</span><span class="va">assoc</span><span class="op">)</span></span>
<span>  <span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/graph_from_data_frame.html" class="external-link">graph_from_data_frame</a></span><span class="op">(</span><span class="va">assoc</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html" class="external-link">ggraph</a></span><span class="op">(</span>graph <span class="op">=</span> <span class="va">graph</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html" class="external-link">geom_edge_link</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>edge_alpha<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">measure</span><span class="op">)</span>,color<span class="op">=</span><span class="va">measure</span>,edge_width<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">measure</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html" class="external-link">geom_node_point</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_text.html" class="external-link">geom_node_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">name</span><span class="op">)</span>,repel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>edge_alpha<span class="op">=</span><span class="st">"none"</span>,edge_width<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/scale_edge_colour.html" class="external-link">scale_edge_color_gradient2</a></span><span class="op">(</span>limits<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>,low<span class="op">=</span><span class="st">"blue"</span>,mid <span class="op">=</span> <span class="st">"white"</span>,high<span class="op">=</span><span class="st">"brown"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">nw_corVis</span><span class="op">(</span><span class="va">penguins_assoc</span><span class="op">)</span></span></code></pre></div>
<p><img src="integrating_corVis_files/figure-html/linkspotter-2.png" width="480" style="display: block; margin: auto auto auto 0;"></p>
<p>Figure 2: Left:Association display for penguins data using
<code>linkspotter</code>. Right: Association display for penguins data
in a network plot.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-displays-from-corvis-with-data-structures-from-other-packages">Using displays from corVis with data structures from other
packages<a class="anchor" aria-label="anchor" href="#using-displays-from-corvis-with-data-structures-from-other-packages"></a>
</h2>
<div class="section level3">
<h3 id="data-structure-using-correlation-package">Data structure using <code>correlation</code> package<a class="anchor" aria-label="anchor" href="#data-structure-using-correlation-package"></a>
</h3>
<p>As mentioned earlier, we separate the calculation and visualisation
step in <em>corVis</em> which makes it a flexible package to use with
other packages. In this section, we use correlation or association
measures data structure from <code>correlation</code> package in and
plot these measures using displays provided in <em>corVis</em>.</p>
<p><code>correlation</code> package calculates different kinds of
correlations, such as partial correlations, Bayesian correlations,
multilevel correlations, polychoric correlations, biweight, percentage
bend or Sheperd’s Pi correlations, distance correlation and more. The
output data structure is a tidy dataframe with a correlation value and
correlation tests for variable pairs for which the correlation method is
defined. We can convert this data structure into <em>pairwise</em> (or
<em>multi_pairwise</em>) using a customised function.</p>
<p>The code snippet below shows how we can convert the data structure
from <code>correlation</code> to <em>pairwise</em> and then use the
plotting function for displaying the variable pairs with association
measures.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/correlation/" class="external-link">correlation</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"island"</span>, <span class="st">"bill_l"</span>, <span class="st">"bill_d"</span>, <span class="st">"flip_l"</span>, <span class="st">"mass"</span>, <span class="st">"sex"</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="va">correlation_df</span> <span class="op">&lt;-</span> <span class="fu">correlation</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation</a></span><span class="op">(</span><span class="va">df</span>, method <span class="op">=</span> <span class="st">"pearson"</span><span class="op">)</span></span>
<span><span class="va">as_pairwise</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">correlation_df</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">d</span> <span class="op">&lt;-</span> <span class="va">correlation_df</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Parameter1</span>,<span class="va">Parameter2</span>,<span class="va">r</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y"</span>,<span class="st">"x"</span>,<span class="st">"measure"</span><span class="op">)</span></span>
<span>  <span class="va">d</span><span class="op">$</span><span class="va">measure_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">correlation_df</span>,<span class="st">"method"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="st">"pairwise"</span>, <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">d</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">penguins_assoc</span> <span class="op">&lt;-</span> <span class="fu">as_pairwise</span><span class="op">(</span><span class="va">correlation_df</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_assoc_matrix.html">plot_assoc_matrix</a></span><span class="op">(</span><span class="va">penguins_assoc</span><span class="op">)</span></span></code></pre></div>
<p><img src="integrating_corVis_files/figure-html/correlation_calc_assoc-1.png" width="480" style="display: block; margin: auto auto auto 0;">
Figure 4: Association plot with measures calculated using
<code>correlation</code> package</p>
<p>The below code snippet shows how we can convert a data structure with
multiple measures calcultaed using <code>linkspotter</code> to
<em>multi_pairwise</em> data structure to be used with plotting
functions in <code>corVis</code> package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi_correlation_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu">as_pairwise</span><span class="op">(</span><span class="fu"><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation</a></span><span class="op">(</span><span class="va">df</span>, method <span class="op">=</span> <span class="st">"pearson"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                              <span class="fu">as_pairwise</span><span class="op">(</span><span class="fu"><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation</a></span><span class="op">(</span><span class="va">df</span>, method <span class="op">=</span> <span class="st">"blomqvist"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                              <span class="fu">as_pairwise</span><span class="op">(</span><span class="fu"><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation</a></span><span class="op">(</span><span class="va">df</span>, method <span class="op">=</span> <span class="st">"hoeffding"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                              <span class="fu">as_pairwise</span><span class="op">(</span><span class="fu"><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation</a></span><span class="op">(</span><span class="va">df</span>, method <span class="op">=</span> <span class="st">"biweight"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                              <span class="fu">as_pairwise</span><span class="op">(</span><span class="fu"><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation</a></span><span class="op">(</span><span class="va">df</span>, method <span class="op">=</span> <span class="st">"distance"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">as_multi_pairwise</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">multi_correlation_df</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">multi_correlation_df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"multi_pairwise"</span>, <span class="st">"pairwise"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">multi_correlation_df</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">multi_correlation_df</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">penguins_assoc_multi</span> <span class="op">&lt;-</span> <span class="fu">as_multi_pairwise</span><span class="op">(</span><span class="va">multi_correlation_df</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_assoc_matrix.html">plot_assoc_matrix</a></span><span class="op">(</span><span class="va">penguins_assoc_multi</span><span class="op">)</span></span></code></pre></div>
<p><img src="integrating_corVis_files/figure-html/linkspotter_calc_assoc_multi-1.png" width="480" style="display: block; margin: auto auto auto 0;"></p>
<p>Figure 5: Multiple association measures plot with measures calculated
using <code>correlation</code> package</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Amit Chinwan, Catherine Hurley.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
