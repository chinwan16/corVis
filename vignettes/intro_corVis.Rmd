---
title: "Introduction to corVis"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{intro_corVis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(corVis)
library(mlr3data)
library(MLDataR)
```


```{r setup2, include=FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE,fig.align = "center",fig.height = 10,fig.width = 10)
```

corVis is an R package which calculates different correlation measures for a dataset and can help in visualising these correlations in different ways. These displays can help find interesting patterns in a dataset.

## Correlation

Correlation is a measure of association between two random variables. There are different methods which have been proposed to calculate the strength (or direction) of association. For example, pearson's correlation coefficient calculates the strength and direction of the linear association present between two variables and it is in the range $[-1,1]$. A correlation measure can be considered a good measure if it is symmetric. Correlation measures serve as important tools during the Exploratory Data Analysis (EDA) process. These measures can be used for screening variables which are highly correlated in a high-dimensional dataset prior to modeling.

In this package we provide a range of correlation measures which can capture linear and non-linear associations between two variables. The available correlation measures include - *pearson*, *spearman*, *kendall*, *distance*, *maximal information coefficient (mic)*. A user can use `association_measure` to calculate one of these correlation measure between all the possible variable pairs in the dataset. 

```{r}
df <- as.data.frame(csgo)
glimpse(df)

numeric_vars <- names(df[sapply(df,is.numeric)])
int_numeric_vars <- numeric_vars[4:length(numeric_vars)]

dplyr::glimpse(association_measure(data = df[int_numeric_vars],method = "pearson"))
```

A functionality to calculate correlation among the variable pairs in a grouped setting has also been introduced in  `association_measure`. One can use `group_by` to specify a grouping variable and the correlation measure will be calculated for all the variable pairs at each level of the grouping variable. 

```{r}
df <- df[c(int_numeric_vars,"result")]
distance <- association_measure(data = df,group_by = "result",method = "distance")
```

## Correlation displays

The package also helps in plotting the calculated correlations in different displays. We have provided both matrix as well as linear layout for displaying these correlation measures. A user can pick either display to visualise correlations.

### Measures using bars

The default seriation is by the overall correlation between pairs of variables. One could choose the maximum difference between the levels or overall as the measure for seriating the barplot. It would assist an analyst in locating interesting displays easily.
```{r}
bar_display(distance)
bar_display(distance,order.by = "max_diff")

```

Different measures on upper and lower triangle
```{r}
pearson <- association_measure(data = df,group_by = "result",method = "pearson")
bar_display(pearson,distance)
```

One can use a different grouping variable to find out the interesting pairs of variables.

```{r}
df <- as.data.frame(csgo)
df <- df[c(int_numeric_vars,"map")]

pearson <- association_measure(data = df,group_by = "map",method = "pearson")
bar_display(pearson,order.by = "overall")
```


### Measures using heatmap
```{r}
all_measures <- association_measures(df[int_numeric_vars])
heatmap_measures_Viz(all_measures)
```


### Heatmap with measures faceted by grouping variable
```{r}
all_measures <- association_measures(df,group_by = "map")
heatmap_measures_Viz(all_measures,group_by="map")
```



